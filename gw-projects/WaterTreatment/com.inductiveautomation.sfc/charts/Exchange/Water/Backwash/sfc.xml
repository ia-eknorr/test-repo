<?xml version="1.0" ?>
<sfc zoom="0.59999985" canvas="31 20" execution-mode="Callable" hot-editable="false" persist-state="true" redundant-sync="false">
	<onstart>def onStart(chart): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	pass</onstart>
	<oncancel>def onCancel(chart): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	pass</oncancel>
	<step id="c5cd5cd7-d19b-48a8-ad9e-8bfa3765c98a" location="1 0" name="__begin" factory-id="begin-step">
<parameters>
	<parameter key="true"><name>filterNumber</name><expression>1</expression></parameter>
</parameters>
	</step>
	<step id="d93907d4-2ac7-478b-99d7-077350b6e3e5" location="1 1" name="Init" factory-id="action-step">
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	# Set chart Filter reference object 
	Filter = exchange.water.udt.getFilter(int(chart.filterNumber))
	
	# Set chart Blower reference object
	blowerPath = '[default]Exchange/Water/Filters/Blower'
	chart.Blower = exchange.water.udt.getHoa(blowerPath)
	
	# Set other chart vars
	chart.behavior = Filter.getBehaviorConfigs()
	chart.timeout = Filter.get('Backwash/Timeout')
	chart.Filter = Filter
	
	
	path = "Exchange/SELECT Last Backwash by Filter"
	currentBackwash = system.db.runNamedQuery(path, {'filter':chart.filterNumber})
	

	if currentBackwash == 0:
		filterPath = '[default]Exchange/Water/Filters/Filter'+str(chart.filterNumber)
		filterValues = system.tag.readBlocking(filterPath)[0].value
		
		queryPath = "Exchange/INSERT New Backwash by Filter"
		params = {
			'filter':chart.filterNumber,
			'start_time':system.date.now(),
			'level_before': filterValues['Level'],
			'flow_before': filterValues['Flow'],
			'loh_before': filterValues['LOH'],
			'turb_before': filterValues['Turb'],
			'backwash_type': 'A'
		}
		system.db.runNamedQuery(queryPath, params)</start-script>
	</step>
	<step id="378ca866-6f81-402b-a531-f43cf5bab618" location="1 3" name="CloseInf" factory-id="action-step">
		<notes>Close Influent valve</notes>
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	#system.util.getLogger('Backwash').info(str(chart))
	chart.Filter.influentValve('close')
	chart.Filter.setBackwashStep(1)
	chart.Filter.writeTags()</start-script>
	</step>
	<step id="2d6356c3-1afb-44e6-931d-20918eb1a7de" location="1 4" name="InfClsd" factory-id="enclosing-step" chart-path="./Util/CheckFilterState" execution-mode="RunUntilCompletion">
<parameters>
	<parameter><name>filterNumber</name><expression>{filterNumber}</expression></parameter>
	<parameter><name>device</name><expression>"/Valves/Influent"</expression></parameter>
	<parameter><name>desiredState</name><expression>0</expression></parameter>
	<parameter><name>timeout</name><expression>{timeout}</expression></parameter>
</parameters>

<return-parameters>
	<return-parameter><enclosed-name>abort</enclosed-name><local-name>abort</local-name></return-parameter>
</return-parameters>
	</step>
	<step id="2969f3dd-6316-4b01-8565-f48318393a2c" location="6 1" name="CloseDrain" factory-id="action-step">
		<notes>Close Drain valve</notes>
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	chart.Filter.drainValve('close')
	chart.Filter.setBackwashStep(4)
	chart.Filter.writeTags()
#	tags = ["[default]Water/Filters/Filter" + str(chart.filterNum) + "/Valves/Drain/Auto",
#			"[default]Water/Filters/Filter" + str(chart.filterNum) + "/Backwash/Step"]
#	vals = [0, 4]
#	system.tag.writeBlocking(tags, vals)</start-script>
	</step>
	<step id="1c01d12c-e1ad-4add-ab3a-fc2eaa59236e" location="6 2" name="DrainClsd" factory-id="enclosing-step" chart-path="./Util/CheckFilterState" execution-mode="RunUntilCompletion">
<parameters>
	<parameter><name>filterNumber</name><expression>{filterNumber}</expression></parameter>
	<parameter><name>device</name><expression>"/Valves/Drain"</expression></parameter>
	<parameter><name>desiredState</name><expression>0</expression></parameter>
	<parameter><name>timeout</name><expression>{timeout}</expression></parameter>
</parameters>

<return-parameters>
	<return-parameter><enclosed-name>abort</enclosed-name><local-name>abort</local-name></return-parameter>
</return-parameters>
	</step>
	<step id="2f65eaad-c49c-476f-952e-6d5790e02a22" location="1 7" name="CloseEff" factory-id="action-step">
		<notes>Close Effluent valve</notes>
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	chart.Filter.effluentValve('close', immediate=True)</start-script>
	</step>
	<step id="36d6f5c7-99a8-4b49-b10d-ae39fcb54675" location="6 5" name="BlowerStrt" factory-id="action-step">
		<notes>Start Blower</notes>
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	chart.Blower.setAuto(1, immediate=True)
	chart.Filter.setBackwashStep(5, immediate=True)</start-script>
	</step>
	<step id="4e86256c-f99f-4727-9ad0-1d6e597f2289" location="1 8" name="EffClsd" factory-id="enclosing-step" chart-path="./Util/CheckFilterState" execution-mode="RunUntilCompletion">
<parameters>
	<parameter><name>filterNumber</name><expression>{filterNumber}</expression></parameter>
	<parameter><name>device</name><expression>"/Valves/Effluent"</expression></parameter>
	<parameter><name>desiredState</name><expression>0</expression></parameter>
	<parameter><name>timeout</name><expression>{timeout}</expression></parameter>
</parameters>

<return-parameters>
	<return-parameter><enclosed-name>abort</enclosed-name><local-name>abort</local-name></return-parameter>
</return-parameters>
	</step>
	<step id="22bab82f-3bcc-4563-92a8-cbd962dabfd3" location="6 6" name="BlowerOn" factory-id="enclosing-step" chart-path="./Util/CheckBlowerState" execution-mode="RunUntilCompletion">
<parameters>
	<parameter><name>filterNumber</name><expression>{filterNumber}</expression></parameter>
	<parameter><name>desiredState</name><expression>1</expression></parameter>
	<parameter><name>timeout</name><expression>{timeout}</expression></parameter>
</parameters>

<return-parameters>
	<return-parameter><enclosed-name>abort</enclosed-name><local-name>abort</local-name></return-parameter>
</return-parameters>
	</step>
	<step id="0e6ab40e-4c7a-4810-96b3-f727b80d3d1f" location="6 9" name="Pressure" factory-id="action-step">
		<notes>Increase Blower pressure</notes>
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	airPressurePath = '[default]Exchange/Water/Filters/AirPressure'
	chart.Filter.addExternalReads(airPressurePath)
	
	chart.pressure = chart.Filter.readTags()[0].value
	exchange.water.logger.getLogger('SFC', 'Backwash').log('Filter {} Pressure: {}'.format(chart.filterNumber, chart.pressure))
	exchange.water.logger.getLogger('SFC', 'Backwash').log(str(chart.pressure &gt;= chart.behavior.blowerSetpoint))</start-script>
	<timer-script interval="1000">def onTimer(chart, step):
	# Increment blower pressure
	chart.pressure += chart.Filter.blowerRate
	
	# Write new pressure to tag
	airPressurePath = '[default]Exchange/Water/Filters/AirPressure'
	chart.Filter.addExternalWrites(airPressurePath, chart.pressure)
	chart.Filter.writeTags()
	#system.tag.writeBlocking(["[default]Water/Filters/AirPressure"], [chart.pressure])</timer-script>
	</step>
	<step id="a1b65aac-5276-47f3-8790-8213470d4154" location="1 11" name="Slow" factory-id="action-step">
		<notes>Slow filter flow</notes>
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	# Read filter level
	chart.flow = chart.Filter.get('Flow')</start-script>
	<timer-script interval="100">def onTimer(chart, step):
	# Decrement filter level
	chart.flow -= chart.Filter.flowRate
	
	# Write new level to tag
	chart.Filter.set('Backwash/SimData/Flow', chart.flow)</timer-script>
	</step>
	<step id="88616f54-83d9-4bc3-8898-4e63d092f81c" location="11 4" name="BlowerStp" factory-id="action-step">
		<notes>Stop Blower</notes>
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	chart.blowerCall = 0
	chart.Blower.setAuto(0, immediate=True)
	chart.Filter.setBackwashStep(9, immediate=True)</start-script>
	</step>
	<step id="30432b1f-c498-467b-894a-cb1042a0077b" location="11 5" name="BlowerOff" factory-id="enclosing-step" chart-path="./Util/CheckBlowerState" execution-mode="RunUntilCompletion">
<parameters>
	<parameter><name>filterNumber</name><expression>{filterNumber}</expression></parameter>
	<parameter><name>desiredState</name><expression>0</expression></parameter>
	<parameter><name>timeout</name><expression>{timeout}</expression></parameter>
</parameters>

<return-parameters>
	<return-parameter><enclosed-name>abort</enclosed-name><local-name>abort</local-name></return-parameter>
</return-parameters>
	</step>
	<step id="0748ba6b-4f06-4a7b-a2b2-b042f18e5201" location="6 11" name="OpenAir" factory-id="action-step">
		<notes>Open Air Scour valve</notes>
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	logger = exchange.water.logger.getLogger('SFC', 'Backwash')
	logger.log('Opening Air Scour Valve')
	chart.Filter.airScourValve('open')
	chart.Filter.setBackwashStep(6)
	chart.Filter.writeTags()</start-script>
	</step>
	<step id="b3a69fa7-b729-4113-972d-8ccd648b19fe" location="1 13" name="OpenDrain" factory-id="action-step">
		<notes>Open Drain valve</notes>
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	chart.Filter.drainValve('open')
	chart.Filter.setBackwashStep(2)
	chart.Filter.writeTags()</start-script>
	</step>
	<step id="634eae94-0bdb-41bc-a763-47b261e3f9f6" location="6 12" name="AirOpen" factory-id="enclosing-step" chart-path="./Util/CheckFilterState" execution-mode="RunUntilCompletion">
<parameters>
	<parameter><name>filterNumber</name><expression>{filterNumber}</expression></parameter>
	<parameter><name>device</name><expression>"/Valves/AirScour"</expression></parameter>
	<parameter><name>desiredState</name><expression>1</expression></parameter>
	<parameter><name>timeout</name><expression>{timeout}</expression></parameter>
</parameters>

<return-parameters>
	<return-parameter><enclosed-name>abort</enclosed-name><local-name>abort</local-name></return-parameter>
</return-parameters>
	</step>
	<step id="d05c35bf-b774-4228-a5b2-f94e1f37d247" location="1 14" name="DrainOpn" factory-id="enclosing-step" chart-path="./Util/CheckFilterState" execution-mode="RunUntilCompletion">
<parameters>
	<parameter><name>filterNumber</name><expression>{filterNumber}</expression></parameter>
	<parameter><name>device</name><expression>"/Valves/Drain"</expression></parameter>
	<parameter><name>desiredState</name><expression>1</expression></parameter>
	<parameter><name>timeout</name><expression>{timeout}</expression></parameter>
</parameters>

<return-parameters>
	<return-parameter><enclosed-name>abort</enclosed-name><local-name>abort</local-name></return-parameter>
</return-parameters>
	</step>
	<step id="d04d03aa-c1a5-425d-9f13-a65502660d21" location="6 15" name="AirScour" factory-id="action-step">
		<notes>Air Scour process (timed)</notes>
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	chart.timer = 0
	chart.turb = chart.Filter.get('Turb')
	chart.Filter.setBackwashStep(7, immediate=True)</start-script>
	<timer-script interval="1000">def onTimer(chart, step):
	import random
	chart.timer += 1
	
	# Rapidly increase turbidity during first few seconds
	if chart.timer &lt;= 5:
		# Add random value each second
		chart.turb = chart.turb + round(random.uniform(0.025, 0.1), 3)
		# Update lower and upper bounds
		step.lower = chart.turb - 0.06
		step.upper = chart.turb + 0.06
	else:
		# Simulate turbidity
		chart.turb = round(random.uniform(step.lower, step.upper), 3)
	
	chart.Filter.addWrites('Turb', chart.turb)
	chart.Filter.writeTags()
	#system.tag.writeBlocking(["[default]Water/Filters/Filter" + str(chart.filterNum) + "/Backwash/Turb"], [chart.turb])</timer-script>
	</step>
	<step id="a051f7d3-e718-45a5-9db7-1ed6a6c52807" location="1 17" name="Drain" factory-id="action-step">
		<notes>Drain filter</notes>
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	# Read filter level
	chart.level = chart.Filter.get('Level')
	
	chart.Filter.setBackwashStep(3)
	chart.Filter.set('Backwash/SimData/Level', chart.level)</start-script>
	<timer-script interval="500">def onTimer(chart, step):
	# Decrement filter level
	chart.level -= (chart.Filter.drainRate * 0.5)
	
	# Write new level to tag
	chart.Filter.set('/Backwash/SimData/Level', chart.level)</timer-script>
	</step>
	<step id="5146f8b3-1adc-49dc-a44e-708d91769ddd" location="6 17" name="CloseAir" factory-id="action-step">
		<notes>Close Air Scour valve</notes>
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	chart.Filter.airScourValve('close')
	chart.Filter.setBackwashStep(8)
	chart.Filter.writeTags()</start-script>
	</step>
	<step id="afc5ea85-3513-4c6a-bf99-48aa7abd1214" location="6 18" name="AirClsd" factory-id="enclosing-step" chart-path="./Util/CheckFilterState" execution-mode="RunUntilCompletion">
<parameters>
	<parameter><name>filterNumber</name><expression>{filterNumber}</expression></parameter>
	<parameter><name>device</name><expression>"/Valves/AirScour"</expression></parameter>
	<parameter><name>desiredState</name><expression>0</expression></parameter>
	<parameter><name>timeout</name><expression>{timeout}</expression></parameter>
</parameters>

<return-parameters>
	<return-parameter><enclosed-name>abort</enclosed-name><local-name>abort</local-name></return-parameter>
</return-parameters>
	</step>
	<step id="6c8fe1c6-5660-4f73-afd6-7d531f074409" location="23 1" name="CloseSupply" factory-id="action-step">
		<notes>Close Backwash Supply valve</notes>
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	chart.Filter.backwashValve('close')
	chart.Filter.setBackwashStep(14)
	chart.Filter.writeTags()</start-script>
	</step>
	<step id="cae81416-ea75-4eec-80dd-25a0b6561f95" location="23 2" name="SupplyClsd" factory-id="enclosing-step" chart-path="./Util/CheckFilterState" execution-mode="RunUntilCompletion">
<parameters>
	<parameter><name>filterNumber</name><expression>{filterNumber}</expression></parameter>
	<parameter><name>device</name><expression>"/Valves/Backwash"</expression></parameter>
	<parameter><name>desiredState</name><expression>0</expression></parameter>
	<parameter><name>timeout</name><expression>{timeout}</expression></parameter>
</parameters>

<return-parameters>
	<return-parameter><enclosed-name>abort</enclosed-name><local-name>abort</local-name></return-parameter>
</return-parameters>
	</step>
	<step id="c9da8000-db4a-4722-a579-98303633418d" location="23 5" name="CloseWaste" factory-id="action-step">
		<notes>Close Waste valve</notes>
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	chart.Filter.wasteValve('close')
	chart.Filter.setBackwashStep(15)
	chart.Filter.writeTags()</start-script>
	</step>
	<step id="2236a973-b28d-42d4-ac31-85ceab2b9b4b" location="23 6" name="WasteClsd" factory-id="enclosing-step" chart-path="./Util/CheckFilterState" execution-mode="RunUntilCompletion">
<parameters>
	<parameter><name>filterNumber</name><expression>{filterNumber}</expression></parameter>
	<parameter><name>device</name><expression>"/Valves/Waste"</expression></parameter>
	<parameter><name>desiredState</name><expression>0</expression></parameter>
	<parameter><name>timeout</name><expression>{timeout}</expression></parameter>
</parameters>

<return-parameters>
	<return-parameter><enclosed-name>abort</enclosed-name><local-name>abort</local-name></return-parameter>
</return-parameters>
	</step>
	<step id="7a3ae4aa-f204-4e46-a8d9-8a4e5d6d55eb" location="23 9" name="Slow2" factory-id="action-step">
		<notes>Slow Filter flow</notes>
	<timer-script interval="1000">def onTimer(chart, step):
	# Decrement filter level
	chart.flow -= chart.behavior.flowRate
	
	chart.flow = max(chart.flow, 0)
	
	# Write new level to tag
	chart.Filter.set('Backwash/SimData/Flow', chart.flow)</timer-script>
	</step>
	<step id="7b783d4b-c692-49c2-8add-fc8a76698737" location="18 17" name="Reset" factory-id="action-step">
		<notes>Reset backwash step, valves, blower pressure, and backwash mode</notes>
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	# Set backwash step to 24 (failure) and populate message
	logger = exchange.water.logger.getLogger('SFC', 'Backwash')
	logger.log("Backwash (Filter {0}) aborted on step {1}".format(chart.filterNumber, chart.Filter.get('Backwash/Step')))
	chart.Filter.addWrites('Backwash/Message', 'Timeout reached waiting for device state to change.')
	chart.Filter.setBackwashStep(24)
	chart.Filter.writeTags()
	
	chart.timer = 0</start-script>
		<stop-script>def onStop(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	# Open influent &amp; effluent valves; close all others
	chart.Filter.influentValve('open')
	chart.Filter.effluentValve('open')
	chart.Filter.airScourValve('close')
	chart.Filter.backwashValve('close')
	chart.Filter.drainValve('close')
	chart.Filter.rinseValve('close')
	chart.Filter.wasteValve('close')
	writePaths = [
		'Backwash/SimData/AirPressure'
		, 'Backwash/SimData/Flow'
		, 'Backwash/SimData/Level'
		, 'Backwash/SimData/Turb'
		, 'Backwash/Step'
		, 'Backwash/Mode'
		, 'Control/BackwashMode'
	]
	writeValues = [0, 0, 0, 0, 0, 1, 0,]
	chart.Filter.addWrites(writePaths, writeValues)
	chart.Filter.writeTags()</stop-script>
	<timer-script interval="1000">def onTimer(chart, step):
	chart.timer += 1</timer-script>
	</step>
	<step id="510381e4-7a25-4ce2-96c6-500333fa0979" location="23 11" name="OpenInf" factory-id="action-step">
		<notes>Open Influent valve</notes>
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	chart.Filter.influentValve('open')
	chart.Filter.setBackwashStep(16)
	chart.Filter.writeTags()</start-script>
	</step>
	<step id="73fd6c8d-7d64-4142-ad55-28a730a64446" location="23 12" name="InfOpen" factory-id="enclosing-step" chart-path="./Util/CheckFilterState" execution-mode="RunUntilCompletion">
<parameters>
	<parameter><name>filterNumber</name><expression>{filterNumber}</expression></parameter>
	<parameter><name>device</name><expression>"/Valves/Influent"</expression></parameter>
	<parameter><name>desiredState</name><expression>1</expression></parameter>
	<parameter><name>timeout</name><expression>{timeout}</expression></parameter>
</parameters>

<return-parameters>
	<return-parameter><enclosed-name>abort</enclosed-name><local-name>abort</local-name></return-parameter>
</return-parameters>
	</step>
	<step id="3f4c419c-9958-4915-88b5-b9f3019c65d0" location="18 19" name="__end1" factory-id="end-step">	</step>
	<step id="38997e2d-9f5d-43a0-a502-618fa7ce5849" location="23 15" name="Fill" factory-id="action-step">
		<notes>Fill Filter</notes>
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	chart.Filter.setBackwashStep(17, immediate=True)</start-script>
	<timer-script interval="1000">def onTimer(chart, step):
	# Decrement filter level
	chart.level += chart.behavior.fillRate
	
	# Write new level to tag
	chart.Filter.set('Backwash/SimData/Level', chart.level)</timer-script>
	</step>
	<step id="9b0b4892-88e2-4531-9dbc-7446919b7b7f" location="28 2" name="Begin" factory-id="action-step">
		<notes>Begin Filter rinse (slowly increase flow)</notes>
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	chart.timer = 0
	
	# Determine bounds for level simulation
	step.upper = chart.level + 0.4
	step.lower = chart.level - 0.4
	
	chart.Filter.setBackwashStep(19, immediate=True)</start-script>
	<timer-script interval="1000">def onTimer(chart, step):
	# Increase flow
	chart.flow += chart.behavior.flowRate
	
	# Decrease turbidity
	chart.turb -= chart.behavior.turbRate
		
	# Simulate level change
	import random
	chart.level = max(2 * chart.behavior.drainSetpoint, chart.level + round(random.uniform(-0.5, 0.5), 2))
	
	# Write new values to tags
	filterWrites = ['Backwash/SimData/Flow', 'Backwash/SimData/Turb', 'Backwash/SimData/Level"']
	filterValues = [chart.flow, chart.turb, chart.level]
	chart.Filter.addWrites(filterWrites, filterValues)
	chart.Filter.writeTags()</timer-script>
	</step>
	<step id="516f33c9-a639-46c1-a902-228bd79d2809" location="28 4" name="Rinse" factory-id="action-step">
		<notes>Rinse Filter</notes>
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	# Determine bounds for level simulation
	step.upper = chart.level + 0.4
	step.lower = chart.level - 0.4</start-script>
	<timer-script interval="1000">def onTimer(chart, step):
	# Increment turbidity
	chart.turb -= chart.behavior.turbRate * 6.6
	
	chart.turb = max(chart.turb, 0)
	
	# Simulate level fluctuation
	import random
	chart.level = round(random.uniform(step.lower, step.upper), 2)
	
	# Write new values to tags
	filterWrites = ['Backwash/SimData/Turb', 'Backwash/SimData/Level']
	filterValues = [chart.turb, chart.level]
	chart.Filter.addWrites(filterWrites, filterValues)
	chart.Filter.writeTags()</timer-script>
	</step>
	<step id="16913ee9-5852-4d47-b1c8-f233fe2a5fbe" location="23 17" name="OpenRinse" factory-id="action-step">
		<notes>Open Rinse valve</notes>
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	chart.Filter.rinseValve('open')
	chart.Filter.setBackwashStep(18)
	chart.Filter.writeTags()</start-script>
	</step>
	<step id="164b8253-1781-4fae-9417-de5edf8a6439" location="28 6" name="CloseRinse" factory-id="action-step">
		<notes>Close Rinse valve</notes>
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	chart.Filter.rinseValve('close')
	chart.Filter.setBackwashStep(20)
	chart.Filter.writeTags()</start-script>
	</step>
	<step id="f59fe5e8-79cd-45c1-b0bc-460604257d01" location="28 7" name="RinseClsd" factory-id="enclosing-step" chart-path="./Util/CheckFilterState" execution-mode="RunUntilCompletion">
<parameters>
	<parameter><name>filterNumber</name><expression>{filterNumber}</expression></parameter>
	<parameter><name>device</name><expression>"/Valves/Rinse"</expression></parameter>
	<parameter><name>desiredState</name><expression>0</expression></parameter>
	<parameter><name>timeout</name><expression>{timeout}</expression></parameter>
</parameters>

<return-parameters>
	<return-parameter><enclosed-name>abort</enclosed-name><local-name>abort</local-name></return-parameter>
</return-parameters>
	</step>
	<step id="0e0a99f4-99cd-446f-be7d-d6f24a672f03" location="23 18" name="RinseOpen" factory-id="enclosing-step" chart-path="./Util/CheckFilterState" execution-mode="RunUntilCompletion">
<parameters>
	<parameter><name>filterNumber</name><expression>{filterNumber}</expression></parameter>
	<parameter><name>device</name><expression>"/Valves/Rinse"</expression></parameter>
	<parameter><name>desiredState</name><expression>1</expression></parameter>
	<parameter><name>timeout</name><expression>{timeout}</expression></parameter>
</parameters>

<return-parameters>
	<return-parameter><enclosed-name>abort</enclosed-name><local-name>abort</local-name></return-parameter>
</return-parameters>
	</step>
	<step id="7c66a6fe-e24b-4b98-9d8d-5a088af0bf06" location="28 10" name="Refill" factory-id="action-step">
		<notes>Refill Filter</notes>
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	chart.Filter.setBackwashStep(21, immediate=True)</start-script>
	<timer-script interval="1000">def onTimer(chart, step):
	# Increase filter level
	chart.level += chart.behavior.fillRate
	
	# Decrease flow
	chart.flow -= chart.behavior.flowRate * 2
	chart.flow = max(chart.flow, 0)
	
	# Write new values to tags
	filterWrites = [
		'Backwash/SimData/Flow'
		, 'Backwash/SimData/Level'
	]
	filterValues = [chart.flow, chart.level]
	chart.Filter.addWrites(filterWrites, filterValues)
	chart.Filter.writeTags()</timer-script>
	</step>
	<step id="307f45a4-75b3-4a23-b0fb-370574d2886c" location="28 12" name="OpenEff" factory-id="action-step">
		<notes>Open Effluent valve</notes>
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	chart.Filter.effluentValve('open')
	chart.Filter.setBackwashStep(22)
	chart.Filter.writeTags()</start-script>
	</step>
	<step id="8c4f49ae-bf45-494c-96f1-3545b12e4f13" location="28 13" name="EffOpen" factory-id="enclosing-step" chart-path="./Util/CheckFilterState" execution-mode="RunUntilCompletion">
<parameters>
	<parameter><name>filterNumber</name><expression>{filterNumber}</expression></parameter>
	<parameter><name>device</name><expression>"/Valves/Effluent"</expression></parameter>
	<parameter><name>desiredState</name><expression>1</expression></parameter>
	<parameter><name>timeout</name><expression>{timeout}</expression></parameter>
</parameters>

<return-parameters>
	<return-parameter><enclosed-name>abort</enclosed-name><local-name>abort</local-name></return-parameter>
</return-parameters>
	</step>
	<step id="4ca3e923-7720-40f3-8a8a-f6f777bed4bc" location="28 16" name="Clear" factory-id="action-step">
		<notes>Clear backwash message, simulate flow &amp; turbidity increase, populate backwash data</notes>
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	filterWrites = [
		'Backwash/Message'
		, 'Backwash/Step'
		, 'Backwash/Mode'
		, 'Backwash/LastBackwash'
		, 'Control/BackwashMode'
		, 'Backwash/RunTime'
		, 'Backwash/Totals/BackwashGals'
	]
	filterValues = [
		''
		, 23
		, 1
		, system.tag.readBlocking(['[System]Gateway/CurrentDateTime'])[0].value
		, 0
		, 0
		, chart.bwGals
	]
	chart.Filter.addWrites(filterWrites, filterValues)
	chart.Filter.writeTags()
	
	# Add backwash gallons to the backwash total
	totalBackwashPath = '[default]Exchange/Water/Flows/BackwashTotal'
	totalBackwash = system.tag.readBlocking([totalBackwashPath])[0].value
	totalBackwash += chart.bwGals
	
	# Record the total amount of time of the backwash operation in seconds
	backwashTimePath = '[default]Exchange/Water/Filters/BackwashTime'
	backwashTime = system.tag.readBlocking([backwashTimePath])[0].value
	backwashTime += system.date.secondsBetween(chart.backwashStart, chart.backwashEnd)
	
	system.tag.writeBlocking([totalBackwashPath, backwashTimePath], [totalBackwash, backwashTime])</start-script>
	<timer-script interval="1000">def onTimer(chart, step):
	# Increase flow
	chart.flow += (chart.behavior.flowRate / 15.4)
	
	# Simulate turbidity based on filter flow (Target 1100 gpm and 0.1 NTU)
	chart.turb = (chart.flow / 1100) * 0.1
	
	filterWrites = [
		'Backwash/SimData/Flow'
		, 'Backwash/SimData/Turb'
	]
	filterValues = [chart.flow, chart.turb]
	chart.Filter.addWrites(filterWrites, filterValues)
	chart.Filter.writeTags()</timer-script>
	</step>
	<step id="ee6d0daf-dc32-45e0-bd7f-77e1553d68f5" location="28 18" name="Finish" factory-id="action-step">
		<notes>Finish process by setting step to zero</notes>
		<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	chart.Filter.setBackwashStep(0, immediate=True)
	
	filterPath = '[default]Exchange/Water/Filters/Filter'+str(chart.filterNumber)
	filterValues = system.tag.readBlocking(filterPath)[0].value
	
	path = "Exchange/UPDATE Last Backwash by Filter"
	params = {
		'filter':chart.filterNumber,
		'end_time':system.date.now(),
		'level_after': filterValues['Level'],
		'flow_after': filterValues['Flow'],
		'loh_after': filterValues['LOH'],
		'turb_after': filterValues['Turb']
	}
	system.db.runNamedQuery(path, params)</start-script>
	</step>
	<step id="2b58749e-eaca-4fbd-b39d-c4d5e7704858" location="28 19" name="__end2" factory-id="end-step">	</step>
	<transition id="669216f1-68cc-431e-9a0c-24cb63985378" location="0 6">{abort}</transition>
	<transition id="1329071b-a44c-4544-822b-4bfb05f3d3fa" location="1 6">!{abort}</transition>
	<transition id="d19a7eca-1ddb-4be7-b513-b7b363c7ea83" location="5 4">{abort}</transition>
	<transition id="391a23c3-2f9c-4933-b286-60ca45ffbf4d" location="6 4">!{abort}</transition>
	<transition id="ceb654fc-ed63-4085-be0c-e9c7629f2491" location="5 8">{abort}</transition>
	<transition id="20dec8c2-8dee-4dcd-b82f-d64fcfb8db57" location="0 10">{abort}</transition>
	<transition id="f43503b1-8dfe-4ae2-978e-147a98437777" location="6 8">!{abort}</transition>
	<transition id="33c6cef1-63e8-4292-87fd-eec7366b8aff" location="1 10">!{abort}</transition>
	<transition id="6cf16f11-37fd-4b47-bb11-89f565362035" location="10 3">{abort}</transition>
	<transition id="d31e04cb-fa88-400b-8a64-956631085914" location="11 3">!{abort}</transition>
	<transition id="67c53459-2056-4797-a94a-f90e76b4c288" location="6 10">{pressure} &gt;= {chart.behavior.blowerSetpoint}</transition>
	<transition id="872dd555-12f5-4187-8279-cabfbf982b21" location="1 12">{flow} &lt;= {chart.behavior.flowRate}</transition>
	<transition id="e24f8474-223c-44b5-bd65-d472b85c2bdb" location="10 7">{abort}</transition>
	<transition id="0588ccda-f315-446b-ad41-c5c7201462bc" location="11 7">!{abort}</transition>
	<transition id="7939a6d3-42de-41fe-a8f4-6cb1f83b2eca" location="5 14">{abort}</transition>
	<transition id="33ec1451-2332-44d9-b68f-6a4ad542d7d8" location="6 14">!{abort}</transition>
	<transition id="fc3b96b2-48d6-44e4-beb4-eecbaedf06f6" location="0 16">{abort}</transition>
	<transition id="670785aa-f126-4a15-8c57-341c07c6c445" location="1 16">!{abort}</transition>
	<transition id="71d3f26c-868c-4852-b691-e25016b074ba" location="6 16">{timer} &gt;= {chart.behavior.scourTimeSetpoint}</transition>
	<transition id="2539e8de-318e-4084-ac43-cca27467ace3" location="1 18">{level} &lt;= {chart.behavior.drainSetpoint}</transition>
	<transition id="d14bd062-d0ee-4418-90c8-35626dd70dd3" location="22 4">{abort}</transition>
	<transition id="a4a30745-6c19-41da-a975-27424ce39eb9" location="23 4">!{abort}</transition>
	<transition id="c1417357-1909-40d6-b324-345d262fbde6" location="22 8">{abort}</transition>
	<transition id="760f56e8-8836-46f9-a746-e75b547f6a8c" location="23 8">!{abort}</transition>
	<transition id="23cd4304-3ab3-4083-a080-2361cf451e72" location="23 10">{flow} = 0</transition>
	<transition id="e66c301e-b7e9-46e3-b072-3cbb583d69fe" location="18 18">{timer} &gt;= 10</transition>
	<transition id="fad4a775-4b70-4f68-86af-e845c5bab1ab" location="19 17">{abort}</transition>
	<transition id="690781d1-543b-4390-9c0f-a6cd75bb77a8" location="22 14">{abort}</transition>
	<transition id="f744a1c2-4133-4c01-af18-02ed5d5ecc23" location="20 17">!{abort}</transition>
	<transition id="48e76d54-9b9c-4dec-a84e-4f1cbaaa36a5" location="23 14">!{abort}</transition>
	<transition id="b1984cdf-1d58-48e8-9fc0-a0e8153bb410" location="27 1">{abort}</transition>
	<transition id="b7097a1b-9c9e-4ad8-b583-2b7ecfa48e8d" location="23 16">// For rinse, double drainSP
{level} &gt;= ({chart.behavior.drainSetpoint} * 2)</transition>
	<transition id="32aa7ca2-69f3-42f1-8c6e-26caef316e95" location="28 1">!{abort}</transition>
	<transition id="b8219135-bf78-4e67-8eb0-c2bf1da9623a" location="28 3">{flow} &lt;= {chart.behavior.rinseFlowSetpoint}</transition>
	<transition id="48bdf14c-3c67-4a69-a4e7-20b7af25b4c4" location="28 5">{turb} &lt;= {chart.behavior.rinseTurbSetpoint}</transition>
	<transition id="35de7a09-3a9d-4c2d-8a4e-5b6f99ba2115" location="27 9">{abort}</transition>
	<transition id="ee97991c-8e20-4911-877f-f18639990bfe" location="28 9">!{abort}</transition>
	<transition id="12a09779-d8cc-4a05-ac13-d56c3a0d2d22" location="28 11">{level} &gt;= {chart.behavior.fillSetpoint}</transition>
	<transition id="c960518b-72ea-42ab-9bb8-69869203655d" location="27 15">{abort}</transition>
	<transition id="0d4f998d-0e4b-49b9-ac81-79ffad4d24ae" location="28 15">!{abort}</transition>
	<transition id="1638e7e0-0476-4eb7-97c6-459686908399" location="28 17">{flow} &gt; 1100</transition>
	<parallel id="f8a50ec4-020f-41f4-ac49-bf9df7b040ba" location="15 1" size="6 14" enable-cancel-condition="true" cancel-condition="{abort}">
		<step id="480924a8-9fda-4ed5-bcf5-bd3c20fbdeb8" location="0 1" name="Bleed" factory-id="action-step">
			<notes>Bleed pressure from Blower / air scour unless another backwash process calls for the blower</notes>
	<timer-script interval="1000">def onTimer(chart, step):
	# Verify another backwash isn't requesting blower pressure
	blowerCall = system.tag.readBlocking(["[default]Water/Filters/Blower/Value"])[0].value
	
	blowerCall = chart.Blower.auto
	
	if blowerCall:
		chart.blowerCall = 1
	else:
		# Decrement blower pressure
		chart.pressure -= chart.behavior.blowerRate
		chart.pressure = max(chart.pressure, 0)
		
		# Write new pressure to tag
		airPressurePath = '[default]Exchange/Water/Filters/AirPressure'
		chart.Filter.addExternalWrites(airPressurePath, chart.pressure)
		chart.Filter.writeTags()
		#system.tag.writeBlocking(["[default]Water/Filters/AirPressure"], [chart.pressure])</timer-script>
		</step>
		<step id="2df1422a-b96d-4969-bc47-427ad4f8cc13" location="0 -1" name="__parallel_begin1" factory-id="begin-step">		</step>
		<step id="dcbca67a-2b79-4de5-86ed-3552d6965766" location="2 -1" name="__parallel_begin2" factory-id="begin-step">		</step>
		<step id="73288605-95de-48a7-862e-ddc3cd07386d" location="3 0" name="Rest" factory-id="action-step">
			<notes>Rest filter to allow media to settle</notes>
			<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	chart.timer = 0
	chart.Filter.setBackwashStep(10, immediate=True)</start-script>
	<timer-script interval="1000">def onTimer(chart, step):
	# Increment timer
	chart.timer += 1
	
	# Build message
	remaining = 10 - chart.timer
	timePiece = 'minute' if remaining &lt;= 1 else 'minutes'
	message = 'Resting filter before backwash. {0} {1} remaining'.format(remaining, timePiece)
	
	# Write new values to tags
	chart.Filter.set('Backwash/Message', message)</timer-script>
		</step>
		<step id="8258a01b-7744-4d81-8731-50f4fe274241" location="3 -1" name="__parallel_begin3" factory-id="begin-step">		</step>
		<step id="aea39cc5-6dea-4d5d-a089-8cd73fbd7ebb" location="3 2" name="OpenSupply" factory-id="action-step">
			<notes>Open Backwash Supply valve</notes>
			<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	chart.Filter.backwashValve('open')
	chart.Filter.setBackwashStep(11)
	chart.Filter.writeTags()</start-script>
		</step>
		<step id="49a5ad88-e8ba-4c6a-aa29-45ec4e15a345" location="3 3" name="SupplyOpn" factory-id="enclosing-step" chart-path="Exchange/Water/Util/CheckFilterState" execution-mode="RunUntilCompletion">
<parameters>
	<parameter><name>filterNumber</name><expression>{filterNumber}</expression></parameter>
	<parameter><name>device</name><expression>"/Valves/Backwash"</expression></parameter>
	<parameter><name>desiredState</name><expression>1</expression></parameter>
	<parameter><name>timeout</name><expression>{timeout}</expression></parameter>
</parameters>

<return-parameters>
	<return-parameter><enclosed-name>abort</enclosed-name><local-name>abort</local-name></return-parameter>
</return-parameters>
		</step>
		<step id="03a82fca-84b9-403e-994b-6ecbedbcc284" location="3 5" name="OpenWaste" factory-id="action-step">
			<notes>Open Waste valve</notes>
			<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	chart.Filter.wasteValve('open')
	chart.Filter.setBackwashStep(12)
	chart.Filter.writeTags()</start-script>
		</step>
		<step id="1d66d252-d7cc-4555-b425-655ceeb708aa" location="3 6" name="WasteOpn" factory-id="enclosing-step" chart-path="Exchange/Water/Util/CheckFilterState" execution-mode="RunUntilCompletion">
<parameters>
	<parameter><name>filterNumber</name><expression>{filterNumber}</expression></parameter>
	<parameter><name>device</name><expression>"/Valves/Waste"</expression></parameter>
	<parameter><name>desiredState</name><expression>1</expression></parameter>
	<parameter><name>timeout</name><expression>{timeout}</expression></parameter>
</parameters>

<return-parameters>
	<return-parameter><enclosed-name>abort</enclosed-name><local-name>abort</local-name></return-parameter>
</return-parameters>
		</step>
		<step id="c8b5e9e9-6307-415e-aba3-8e53f0b232f2" location="3 8" name="BW_Begin" factory-id="action-step">
			<notes>Begin backwash process (increasing flow &amp; turbidity)</notes>
			<start-script>def onStart(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	chart.bwGals = 0
	chart.Filter.setBackwashStep(13, immediate=True)
	chart.backwashStart = system.date.now()</start-script>
	<timer-script interval="1000">def onTimer(chart, step):
	# Increase flow
	chart.flow += chart.behavior.flowRate
	
	# Increse turbidity
	chart.turb += chart.behavior.turbRate
		
	# Simulate level change (must be at or above drain setpoint)
	import random
	chart.level = max(chart.behavior.drainSetpoint, chart.level + round(random.uniform(0, 0.5), 2))
	
	# Read backwash tank level
	backwash = "[default]Exchange/Water/Tanks/Backwash"
	feet = system.tag.readBlocking([backwash])[0].value
	gpf = 3124.9827 		# Gallons per foot in this tank
	
	# Increment backwash gallons
	chart.bwGals += (chart.flow / 60)
	
	# Calculate new backwash tank level
	level = feet + ((chart.flow / 60) / gpf)
	
	# Write new values to tags
	filterWrites = ['Backwash/SimData/Turb', 'Backwash/SimData/Level', 'Backwash/SimData/Flow']
	filterValues = [chart.turb, level, chart.flow]
	chart.Filter.addWrites(filterWrites, filterValues)
	chart.Filter.addExternalWrites(backwash, level)
	chart.Filter.writeTags()</timer-script>
		</step>
		<step id="9d8bac2e-9017-4219-9bad-88775cc89c0c" location="0 10" name="__parallel_end4" factory-id="end-step">		</step>
		<step id="473aee2e-1612-4f0f-974b-d15611b48534" location="3 10" name="__parallel_end3" factory-id="end-step">		</step>
		<step id="6ee35e43-7b7f-493a-8eb9-4f368b5f78e3" location="3 10" name="Backwash" factory-id="action-step">
			<notes>Run backwash process</notes>
			<stop-script>def onStop(chart, step): # WARNING: This resource was generated in a newer version of Ignition. For the best editing experience, recreate it in the current version.
	# Record ending time of backwashing operation
	chart.backwashEnd = system.date.now()</stop-script>
	<timer-script interval="1000">def onTimer(chart, step):
	# Increment turbidity
	chart.turb += (chart.behavior.turbRate * 7.1)
		
	# Simulate level change (must be at or above drain setpoint)
	import random
	chart.level = max(chart.behavior.drainSetpoint, chart.level + round(random.uniform(-0.5, 0.5), 2))
	
	# Read backwash tank level
	backwash = "[default]Exchange/Water/Tanks/Backwash"
	feet = system.tag.readBlocking([backwash])[0].value
	gpf = 3124.9827 		# Gallons per foot in this tank
	
	# Increment backwash gallons
	chart.bwGals += (chart.flow / 60)
	
	# Calculate new backwash tank level
	level = feet + ((chart.flow / 60) / gpf)
	
	# Write new values to tags
	chart.Filter.addWrites(['Backwash/SimData/Turb', 'Backwash/SimData/Level'], [chart.turb, chart.level])
	chart.Filter.addExternalWrites(backwash, level)
	chart.Filter.writeTags()</timer-script>
		</step>
		<step id="316a07c9-0e8e-4c36-885d-545fbc1c9998" location="0 11" name="__parallel_end2" factory-id="end-step">		</step>
		<step id="1ab8afcf-9767-4007-bb75-146995c405b2" location="-1 11" name="__parallel_end7" factory-id="end-step">		</step>
		<step id="213cb7b9-448c-4784-9fbf-1c73d22c78ff" location="1 11" name="__parallel_end8" factory-id="end-step">		</step>
		<step id="4db61541-128f-4382-9899-de570f622803" location="2 11" name="__parallel_end1" factory-id="end-step">		</step>
		<step id="a43921f6-75a3-41cc-ad4a-78e94aa6e95f" location="3 11" name="__parallel_end5" factory-id="end-step">		</step>
		<step id="0951c053-d159-41b3-8173-4be79cf076e5" location="0 12" name="__parallel_end9" factory-id="end-step">		</step>
		<step id="cd28f5f7-8281-4d3d-aa4c-5ccdcdc27480" location="3 12" name="__parallel_end10" factory-id="end-step">		</step>
		<step id="7f7ca480-72e0-4541-b5a9-b9199c524bb9" location="0 14" name="__parallel_end6" factory-id="end-step">		</step>
		<transition id="1600cc3a-44a1-4893-806e-bea963796596" location="0 2">{pressure} &lt;= 0 || {blowerCall}</transition>
		<transition id="57ceedab-d192-43db-84d3-4e6c9834c1fe" location="3 1">{timer} &lt;= {chart.behavior.restTimeSetpoint}</transition>
		<transition id="7a92ad57-1ed6-430d-bb8e-5d0aef5af92d" location="3 4">!{abort}</transition>
		<transition id="1c58edc9-dc52-4c43-a3b3-8f47cde4f3f3" location="3 7">!{abort}</transition>
		<transition id="b4cd110a-c034-4b8c-a0a6-f45f3b08f5ad" location="3 9">{flow} &gt;= {chart.behavior.backwashFlowSetpoint}</transition>
		<transition id="020353da-a81b-4ba8-9906-29dbe5a7d8ea" location="3 11">{turb} &gt;= {chart.behavior.turbSetpoint}</transition>
		<note id="468e73af-97c0-4633-bf4c-f861a4e41c40" location="1 1" size="2 2">Check blower call to run
Release blower pressure
param "pressure"
Update AirPressure tag
Exit if another process calls
  for the blower to run</note>
		<note id="91180672-f8dc-422b-a95c-565cd1966745" location="4 0" size="2 2">Rest filter
Set Step to 10
param "timer"</note>
		<note id="f92c0607-8fff-47b9-99f2-ff76222f17e8" location="4 2" size="2 1">Open Backwash Valve
Set Step to 11</note>
		<note id="70cb8e01-9612-4791-9450-e8e38780a5e9" location="4 3" size="2 1">Verify Backwash Supply
Valve Opened</note>
		<note id="c7f82e33-4011-4c31-b588-965fd765bbd5" location="4 5" size="2 1">Open Waste Valve
Set Step to 12</note>
		<note id="88fe0e76-33a6-4cf7-8f2a-99f044539806" location="4 6" size="2 1">Verify Waste Valve 
Opened</note>
		<note id="40d94364-f8de-4432-bfa7-79bfc3b744d1" location="4 8" size="2 2">Begin Backwash Process
Set Step to 13
param "flow"
Update Flow, Turb, Level</note>
		<note id="a49bcd21-37f5-4779-94c3-31c924d5f113" location="4 10" size="2 2">Run Backwash Process
param "turb"
Update Turb tag
Update Level tag</note>
		<link id="e9ee6076-4837-49bb-b00e-3542d82ae49a" location="0 0"><up/><down/></link>
		<link id="cc34f0e5-8fc5-4a17-b6b0-9535174a6266" location="0 3"><up/><down/></link>
		<link id="c2e2b41b-60f9-4de8-a4e8-0bb9fd131a3a" location="0 4"><up/><down/></link>
		<link id="39df0392-274b-41ec-8541-2aaf9cfa905f" location="0 5"><up/><down/></link>
		<link id="6ecde541-0b88-4a8c-85ad-f66869c2dfa7" location="0 6"><up/><down/></link>
		<link id="9d07eb98-4564-4d31-a512-c2515d920041" location="0 7"><up/><down/></link>
		<link id="d28085cf-3996-4b37-ab4f-e99daf796d02" location="0 8"><up/><down/></link>
		<link id="70a2eace-6766-46ac-a646-f555b2adc690" location="0 9"><up/><down/></link>
		<link id="aaa97505-d8c1-4a61-ad72-cdab0b59b182" location="0 10"><up/><down/></link>
		<link id="3570edcb-5590-4aaf-a857-19700300aec5" location="0 11"><up/><down/></link>
	</parallel>
	<jump id="88acbfb2-eac7-4faf-9497-2913159fcb02" location="0 7">A</jump>
	<jump id="07a311aa-d92b-4a76-8347-f9b22a508961" location="5 5">A</jump>
	<jump id="ded996c6-f32e-45fd-ac14-25b93a84ac3b" location="5 9">A</jump>
	<jump id="f1b926b9-ec27-4f7b-8a34-02f1dbfdb4a3" location="10 4">A</jump>
	<jump id="e82bc3c1-46e8-4612-8c1d-68d83196dc49" location="0 11">A</jump>
	<jump id="bc892387-ba97-4935-a422-121c15ece131" location="10 8">A</jump>
	<jump id="bfa50271-c8a3-4b30-8684-c471aecb705a" location="5 15">A</jump>
	<jump id="54bd70fe-3d65-48d4-9eaf-d7e0f574bf53" location="0 17">A</jump>
	<jump id="4992da24-d686-4e3f-8b2a-ebb957a82734" location="22 5">A</jump>
	<jump id="5e9d0654-8f11-49ea-a50e-7c658d39f96d" location="22 9">A</jump>
	<jump id="afa34aa4-010f-445b-91ab-4b31a5ccd7e2" location="19 18">A</jump>
	<jump id="f5f9b77b-d67c-4f38-8e11-14a5bd62b651" location="22 15">A</jump>
	<jump id="b94076c4-60a7-4e8a-add8-f6a0d5c4a3ed" location="27 2">A</jump>
	<jump id="f45bc3b9-88d1-4195-836e-c05e41cdca23" location="27 10">A</jump>
	<jump id="5d529791-8340-432d-8c60-a95600e07bd4" location="27 16">A</jump>
	<anchor id="c21dcef0-9cce-47b9-81f7-ac36059e235f" location="18 16">A</anchor>
	<note id="67cf887d-7f03-4321-86f7-1bbae58d8e19" location="2 0" size="2 1" note-background="color(128,0,128,255)" note-foreground="color(255,255,255,255)">Params:
"filterNumber"</note>
	<note id="0b1deb8d-047f-49fc-ba2f-d3778e8d8a34" location="2 3" size="2 1">Close Influent Valve
Set Step to 1</note>
	<note id="151ad853-8608-4b22-b358-577f8fff83e1" location="2 4" size="2 1">Verify Influent Valve 
Closed</note>
	<note id="d9712950-1f04-4259-9ce6-de7e47bf51cd" location="7 1" size="2 1">Close Drain Valve
Set Step to 4</note>
	<note id="a1f8aa62-eedc-49e9-9de1-892679eb76f8" location="2 7" size="2 1">Close Effluent Valve</note>
	<note id="dcf1ecb0-e623-4251-8a70-7336565c2ef7" location="7 2" size="2 1">Verify Drain Valve 
Closed</note>
	<note id="6c5f3022-b8cf-400d-92b3-907da73fdd07" location="2 8" size="2 1">Verify Effluent Valve 
Closed</note>
	<note id="8a2e2aba-1f83-4875-87d2-4bc08cece2de" location="7 5" size="2 1">Start Blower
Set Step to 5</note>
	<note id="336def13-4eaa-4bd4-af21-9336a5fbb9de" location="7 6" size="2 1">Verify Blower Running</note>
	<note id="86117b2c-c542-4626-ba78-6a72256a38ba" location="2 10" size="2 2">Slow filter flow
param "flow"
Update Flow tag</note>
	<note id="75d0129b-9f3f-475e-b59a-1d3b06adf7e6" location="7 8" size="2 2">Build blower pressure
param "pressure"
Update AirPressure tag</note>
	<note id="11881ce5-ab91-4e89-a326-4a0b6e2db2be" location="12 4" size="2 1">Stop Blower
Set Step to 9</note>
	<note id="f8089fad-ca19-474f-93bc-e3f696da9bf9" location="12 5" size="2 1">Verify Blower Stopped</note>
	<note id="3574a49a-7a33-4383-864e-f3af783665ca" location="7 11" size="2 1">Open Air Scour Valve
Set Step to 6</note>
	<note id="58c8a0e1-5a73-44a5-a15e-19e122c104e3" location="2 13" size="2 1">Open Drain Valve
Set Step to 2</note>
	<note id="2502cfa1-38ab-4078-bf1f-3ae4fe2432f1" location="7 12" size="2 1">Verify Air Scour Valve 
Opened</note>
	<note id="c1018e1e-711f-45de-9326-599b521e7538" location="2 14" size="2 1">Verify Drain Valve 
Opened</note>
	<note id="9123bea0-2a8f-45ad-9570-1675e61ca4bc" location="10 10" size="5 10">Filter Backwash Process:
1) Close influent &amp; effluent valves (flow rate decreases)
2) Open drain valve
3) Wait for level to decrease to drain outlet level
4) Close drain valve
5) Start air scour blower and wait for pressure to build
6) Open air scour valve
7) Air scour process runs for specified duration (turbidity increases)
8) Close air scour valve
9) Stop air scour blower
10) Rest filter until timer &gt; setpoint 
       (Blower pressure drops at same time)
11) Open backwash valve
12) Open waste valve
13) Backwash filter until turbidity &gt; setpoint (flow increases)
14) Close backwash supply valve (flow decreases)
15) Close backwash waste valve
16) Open influent valve
17) Wait for filter level to increase to double drain setpoint
18) Open rinse valve
19) Rinse/flush filter until turbidity decreases
20) Close rinse valve
21) Fill filter until level &gt;= setpoint
22) Open effluent valve
23) End Backwash (Slowly increase filter flow / turbidity)</note>
	<note id="b1415062-518d-45ce-97d4-c7983ee4c4e6" location="7 14" size="2 2">Run Air Scour Process
Set Step to 7
param "turb"
Update Turb tag</note>
	<note id="9a5f663a-6b34-4070-91ef-3232fdbcbb5b" location="2 16" size="2 2">Drain filter at drainRate
Set Step to 3
param "level"
Update Level tag</note>
	<note id="c2918904-d402-4cf4-b4d7-354995283fd6" location="7 17" size="2 1">Close Air Scour Valve
Set Step to 8</note>
	<note id="3a0724e5-5a9e-4d67-b527-3106050439a5" location="7 18" size="2 1">Verify Air Scour Valve 
Closed</note>
	<note id="8a8a1f19-5040-4e99-9a7c-68914f8bfafd" location="15 15" size="3 5" note-background="color(217,0,0,255)" note-foreground="color(255,255,255,255)">Abort backwash process when a device 
state fails to change in the specified 
timeout (e.g. HAND mode &amp; user did
not manually open/close the valve)

Display error messages for 10 seconds,
then reset:
- Set Step to 0
- Open Influent &amp; Effluent valves
- Close all other valves
- Reset blower pressure
- Set backwash mode to auto
</note>
	<note id="7e839ac6-4bf2-4705-b9c6-1c48e32b4819" location="24 1" size="2 1">Close Supply Valve
Set Step to 14</note>
	<note id="dc0f02f0-1da4-4d79-bfbd-9618952b33de" location="24 2" size="2 1">Verify Supply Valve
Closed</note>
	<note id="d5215d03-a82b-42d2-b172-fd663b0ca962" location="24 5" size="2 1">Close Waste Valve
Set Step to 15</note>
	<note id="53ab310b-aaf0-49dc-aa44-22d32f173b28" location="24 6" size="2 1">Verify Waste Valve 
Closed</note>
	<note id="48f65f0f-a12d-4be2-a9d1-cdfed053be62" location="24 9" size="2 2">Slow filter flow
param "flow"
Update Flow tag</note>
	<note id="db47a73f-11b8-4f4e-9287-b92e62d2c6aa" location="24 11" size="2 1">Open Influent Valve
Set Step to 16</note>
	<note id="4e177ab4-e0e7-4e5e-93db-750fee3ad524" location="24 12" size="2 1">Verify Influent Valve 
Opened</note>
	<note id="fd326698-9d11-413d-9615-ae88621206fd" location="24 14" size="2 2">Fill filter at fillRate to
  2 * drainSP
Set Step to 17
param "level"
Update filter level tag</note>
	<note id="7dfb4b5d-5b56-4b9d-b3da-178703b5ba3b" location="29 2" size="2 2">Begin filter rinse
Set Step to 19
param "flow"
Update Flow, Turb, Level</note>
	<note id="d57140e0-e8b1-46c9-a756-e162e9dc3788" location="29 4" size="2 2">Rinse filter
param "flow"
Update Flow, Turb, Level</note>
	<note id="557eed65-50a3-49fe-9a55-be73f0a4449c" location="24 17" size="2 1">Open Rinse Valve
Set Step to 18</note>
	<note id="ceaf551d-734f-4c3a-ba1d-eeb147fb8ec0" location="29 6" size="2 1">Close Rinse Valve
Set Step to 20</note>
	<note id="b7bf9a1e-87cf-4f21-8086-5a65cfc48264" location="29 7" size="2 1">Verify Rinse Valve 
Closed</note>
	<note id="80c5fed1-f6f9-4305-a416-afa184544f5c" location="24 18" size="2 1">Verify Rinse Valve 
Opened</note>
	<note id="223aee14-cfc4-4e26-bbd3-59b0397c64ee" location="29 10" size="2 2">Fill filter at fillRate
Set Step to 21
param "level"
Update filter level tag</note>
	<note id="0d11882f-6196-42c0-969e-3220dfb28d3e" location="29 12" size="2 1">Open Effluent Valve
Set Step to 22</note>
	<note id="d0623dea-07db-4356-a4cc-d9cb8f96cd7b" location="29 13" size="2 1">Verify Effluent Valve 
Closed</note>
	<note id="317e8bfe-20fb-4820-8a47-07ad3bef0f6c" location="29 15" size="2 3">Clear Backwash Message
Set Step = 23
Set backwash mode = auto
Set last backwash datetime
Simulate flow &amp; turbidity 
increase as filter is 
brought back online</note>
	<note id="c7da8097-c464-49b2-962c-8da154fe16e6" location="29 18" size="2 1">Set Step to 0
and update backwash DB</note>
	<link id="c5bf559c-4d69-4677-8000-02876976c193" location="1 2"><up/><down/></link>
	<link id="c9d3e29f-d28c-4eb3-926f-c3141cd9479c" location="4 0"><up/><down/><right/></link>
	<link id="aeaa2956-9f6f-496f-959d-077c70740f3e" location="4 1"><up/><down/></link>
	<link id="ac5a234b-3f86-49d2-b13f-14b2125f86dd" location="4 2"><up/><down/></link>
	<link id="d459f956-a2aa-4b79-8972-23ee3263a6ab" location="5 0"><left/><down/><right/></link>
	<link id="4c9d5dc0-88dc-458d-8098-d6e703850fcd" location="4 3"><up/><down/></link>
	<link id="b4a4725d-f874-4bac-ae4b-3505e174a67a" location="0 5"><left/><down/><right/></link>
	<link id="4f87efa2-ea86-41fe-9e15-8bccba56470a" location="1 5"><up/><left/><down/></link>
	<link id="49e63533-8e5f-4d43-a610-757dfafddaaf" location="4 4"><up/><down/><right/></link>
	<link id="c9cb056e-2103-44a7-8824-806238996ef1" location="5 3"><up/><left/><down/><right/></link>
	<link id="cff056e2-b09d-463f-b061-c82355006f5d" location="6 0"><left/><down/><right/></link>
	<link id="69263cce-9961-47a5-90ea-7f23e77cfffc" location="4 5"><up/><down/></link>
	<link id="71146a52-ac2f-4dc6-97ff-3e3bc6e451dc" location="6 3"><up/><left/><down/></link>
	<link id="ce7506ce-0fee-4496-8d43-05eab06340c6" location="4 6"><up/><down/></link>
	<link id="a2fc5379-90a2-4749-b206-0c6534c53e16" location="4 7"><up/><down/></link>
	<link id="30ee9970-a0ed-49ac-b5c2-27a468c8ddc6" location="5 7"><left/><down/><right/></link>
	<link id="14061bbe-97e4-401a-90f4-e50707ac7e0c" location="4 8"><up/><down/></link>
	<link id="c0c56a9f-df83-42bb-81ff-5535820ea45c" location="9 0"><up/><down/><right/></link>
	<link id="7cd0d1cb-1efe-4201-aea2-b884f2b700ee" location="0 9"><left/><down/><right/></link>
	<link id="dc803987-9424-4e7d-859c-a15ff01ac52f" location="9 1"><up/><down/></link>
	<link id="43439402-3fa9-439d-aba2-ee1b8b02bb6a" location="1 9"><up/><left/><down/></link>
	<link id="2499958b-ec3a-46f5-8f02-42ae8fb5e520" location="9 2"><up/><down/></link>
	<link id="f6d8a546-0384-4fb5-9eb7-cd5908761868" location="6 7"><up/><left/><down/></link>
	<link id="a2964afd-b4b0-400f-b35f-5f3267a0a81c" location="9 3"><up/><down/></link>
	<link id="816e3fb8-0034-4891-a6fc-1e6caf00db0e" location="4 9"><up/><down/></link>
	<link id="07bef5f9-72d3-4eb3-98f6-76d00c1367d2" location="9 4"><up/><down/></link>
	<link id="4aafa2fc-bdc0-4535-a4b5-3eef3bf0421c" location="10 0"><left/><right/></link>
	<link id="bac948b7-2b67-4a94-994f-4b73af9e01ec" location="10 2"><left/><down/><right/></link>
	<link id="0ad204c2-4226-4f3b-900e-0aa49ae56a0b" location="9 5"><up/><down/></link>
	<link id="e2db864b-cbd2-46d3-9962-5b9556369a4e" location="4 10"><up/><down/></link>
	<link id="8ab23ccf-9352-41dc-8997-f8096b43a5bf" location="9 6"><up/><down/></link>
	<link id="47103641-d05b-438a-b68d-8c119e0ac7d4" location="11 0"><left/><down/><right/></link>
	<link id="acc1e73f-ab30-499c-85c3-e2b827b9ecc2" location="11 1"><up/><down/></link>
	<link id="1f2e7780-1ed2-4a1c-94b1-0ff0aca3b853" location="11 2"><up/><left/><down/></link>
	<link id="b1114a5a-21d7-48c8-9872-2c51b0fd3dee" location="9 7"><up/><down/></link>
	<link id="9726a70a-4845-4804-9ea5-d932c44cfad6" location="10 6"><left/><down/><right/></link>
	<link id="4c91b61f-45ec-40cf-9cd6-98f4b32f3c10" location="4 11"><up/><down/></link>
	<link id="01f3beb2-c095-43c5-8303-2d1569de8e1f" location="9 8"><up/><down/></link>
	<link id="025196e7-0916-4884-a248-4a7ff40c1088" location="11 6"><up/><left/><down/></link>
	<link id="f03e8c13-8b82-4161-a999-3ed976afd51a" location="4 12"><up/><down/></link>
	<link id="109805eb-7b22-4fca-998e-ab94a64b5249" location="9 9"><up/><down/></link>
	<link id="c66f29c6-7e58-4088-b531-9619b2e87a8d" location="9 10"><up/><down/></link>
	<link id="90db66c4-d681-46d8-905f-c4a2b94b09ab" location="4 13"><up/><down/></link>
	<link id="b7492d8c-47dc-4fe5-be94-3d3a103ab9b3" location="11 8"><up/><down/><right/></link>
	<link id="2de2682d-5a86-4d58-95c5-b2aa235b0af0" location="5 13"><left/><down/><right/></link>
	<link id="06d93d34-e330-4cfd-8bca-d6142ab1a56d" location="14 0"><up/><down/><right/></link>
	<link id="0bacf5f4-4083-4300-87ec-c81010459c69" location="14 1"><up/><down/></link>
	<link id="aeb05658-d376-42e3-92db-94b6e0fd27fa" location="14 2"><up/><down/></link>
	<link id="96046685-6937-497b-b3f6-6131399f1231" location="9 11"><up/><down/></link>
	<link id="9b9e96d8-b4d6-4f26-9e0a-7e64fa19a1b7" location="14 3"><up/><down/></link>
	<link id="982825e5-5fc4-432f-8582-24bc42735443" location="6 13"><up/><left/><down/></link>
	<link id="cc67bb89-1b27-40fb-86e0-e1c8e0c2345e" location="12 8"><left/><right/></link>
	<link id="a706706c-c1a3-474b-8627-ce53e9685fcb" location="4 14"><up/><down/></link>
	<link id="94fb7ec4-8bc2-4a12-bbb0-451d4aecd7ea" location="14 4"><up/><down/></link>
	<link id="cc44507b-8dcd-4e42-b77f-071068828bb5" location="14 5"><up/><down/></link>
	<link id="90bd726f-051b-4c3e-bc7d-a5bf1276738f" location="9 12"><up/><down/></link>
	<link id="4cfc2b79-5e4c-44bf-9ba1-d48deadc7dc8" location="15 0"><left/><right/></link>
	<link id="9c26d40d-6b57-4e68-a912-d3e9428490a4" location="0 15"><left/><down/><right/></link>
	<link id="412edade-eaf6-4cd5-95d7-2a202af57095" location="1 15"><up/><left/><down/></link>
	<link id="c14b0c5f-1d1e-4890-8d27-434e1d322b96" location="14 6"><up/><down/></link>
	<link id="51d63a26-f8a7-4258-955a-849784dcd65b" location="13 8"><left/><right/></link>
	<link id="33b68736-5487-4a31-8af0-78867a5ac3cf" location="4 15"><up/><down/></link>
	<link id="02cd93a1-8a5f-4dec-8dc3-594efcb352db" location="14 7"><up/><down/></link>
	<link id="5dadbc17-2455-46e7-86d1-3f53df5f1752" location="9 13"><up/><down/></link>
	<link id="e9e829b6-f948-49c4-ade5-81432525f6c1" location="16 0"><left/><right/></link>
	<link id="994233b9-90a0-4426-af2b-2ee1dc8b9632" location="14 8"><up/><left/><down/></link>
	<link id="59d7cedb-b818-4bc0-9c5a-51fdc093fef6" location="4 16"><up/><down/></link>
	<link id="53fe0cfd-d137-4e21-97dc-0ad2ff42aed5" location="9 14"><up/><down/></link>
	<link id="2e629ef2-9ff1-42ac-849d-9bcfda28a9dd" location="17 0"><left/><right/></link>
	<link id="6207a2a2-baec-47cb-8859-23e0ade23307" location="4 17"><up/><left/><down/></link>
	<link id="93487810-d34d-4022-8544-7f815cf50a8c" location="9 15"><up/><down/></link>
	<link id="9830cd0c-368d-414d-80df-d8ea34419bec" location="18 0"><left/><down/><right/></link>
	<link id="00ae5e25-b3cb-439d-b7ea-365f8c0c95aa" location="9 16"><up/><down/></link>
	<link id="182f440e-5e0e-48f2-8571-698160b33b95" location="4 18"><up/><down/></link>
	<link id="90418e75-4a2e-4db2-aed1-45f002b7a2ee" location="1 19"><up/><down/><right/></link>
	<link id="30595aa8-6c30-4649-b8c7-62449bba7309" location="2 19"><left/><right/></link>
	<link id="6f0f6758-cb4b-45d5-951d-f0b6fedcab92" location="3 19"><left/><right/></link>
	<link id="6bfdfe62-6328-47f7-bab3-74a6b9adef09" location="9 17"><up/><left/><down/><right/></link>
	<link id="ca41684b-6a72-42aa-bcf4-87e63c3047f2" location="4 19"><up/><left/><right/></link>
	<link id="ccb67275-d52a-432b-92eb-f3e979b5f0ce" location="6 19"><up/><down/><right/></link>
	<link id="fc53939f-a53f-4f40-bd2c-a36fcc75ca56" location="9 18"><up/><down/></link>
	<link id="7391b38b-600a-41c0-ad74-377c62ebdee7" location="7 19"><left/><right/></link>
	<link id="e3c91037-7bed-4e23-ad92-84c4f2179d63" location="8 19"><left/><right/></link>
	<link id="a7367fd1-78b7-4eca-97c7-cf2a579da365" location="21 0"><left/><down/><right/></link>
	<link id="aefa85e2-7e73-4d8c-96c2-cca81f320265" location="21 1"><up/><down/></link>
	<link id="6f4fb628-2a2f-4b3b-9f29-a7db7f9dc474" location="9 19"><up/><left/><right/></link>
	<link id="a22e924b-0d59-448a-a355-05db70d91fde" location="21 2"><up/><down/></link>
	<link id="c07d85ee-0876-40f0-87b4-7509712ff650" location="21 3"><up/><down/></link>
	<link id="a70ff7ad-9a7e-452c-a3eb-86f3345da171" location="21 4"><up/><down/></link>
	<link id="e1f8756c-7eb8-433a-8a69-5ff700dedd21" location="21 5"><up/><down/></link>
	<link id="a71b2aee-7837-4aba-9821-14d8cc928b4d" location="21 6"><up/><down/></link>
	<link id="8f52b3fb-9090-485f-830e-ec41ca185400" location="22 0"><left/><right/></link>
	<link id="f7427a69-6c4b-4dc7-8fc3-b7e834590b09" location="21 7"><up/><down/></link>
	<link id="7d432e93-337f-47ff-aae3-f85a22fc59bc" location="22 3"><left/><down/><right/></link>
	<link id="88930d07-ddff-41b3-8b1e-be04691a6154" location="21 8"><up/><down/></link>
	<link id="bb18c1f9-6e63-46e0-a139-995e3d421329" location="21 9"><up/><down/></link>
	<link id="7404060d-0bef-483a-bbfe-fb8f8dfa3ecd" location="23 0"><left/><down/><right/></link>
	<link id="7ec3f489-8838-41ba-95df-006f33f149b5" location="22 7"><left/><down/><right/></link>
	<link id="4c88e3a7-2a9b-47af-9fca-0f0409cb9df6" location="23 3"><up/><left/><down/></link>
	<link id="6732ba29-0832-42cd-a008-c19b73745362" location="21 10"><up/><down/></link>
	<link id="200c37b1-bfb8-4f53-8274-36c09136d2b9" location="21 11"><up/><down/></link>
	<link id="50bf0f15-e62e-4ea3-90ff-1a91ac118001" location="23 7"><up/><left/><down/><right/></link>
	<link id="1f826c95-00c3-4375-96b6-feb1c51233d8" location="21 12"><up/><down/></link>
	<link id="e03b8e89-9fd7-4b61-9a8e-6d75fa498de1" location="19 15"><up/><left/><down/><right/></link>
	<link id="30c89294-26a5-4a30-a58c-5f20bf6a88fd" location="21 13"><up/><down/></link>
	<link id="4128fc3a-669a-4ef4-82ea-5bbdf6c786dc" location="19 16"><up/><down/><right/></link>
	<link id="d90b5779-44c0-4195-b8c8-d01189adbe9c" location="21 14"><up/><down/><right/></link>
	<link id="0cc68efe-7dad-4753-918a-9908e42e07dc" location="22 13"><left/><down/><right/></link>
	<link id="b11aa451-1f7c-40c1-be67-6193300812e1" location="20 16"><up/><left/><down/></link>
	<link id="8357b51d-c39d-470d-bd85-d0b8a4d7d45e" location="21 15"><up/><down/></link>
	<link id="c7a5b865-a0ed-43cc-b90b-19de4cabf203" location="26 0"><up/><down/><right/></link>
	<link id="72b60449-20b6-43ac-b889-81beb202e610" location="26 1"><up/><down/></link>
	<link id="81c1619a-d14f-4a6e-9796-3b390df5bb98" location="26 2"><up/><down/></link>
	<link id="237ed155-4013-42c4-8f39-f660012d02ee" location="26 3"><up/><down/></link>
	<link id="23963153-2a4f-4b9d-8051-06d600ca2b1d" location="26 4"><up/><down/></link>
	<link id="5c88d135-7231-454a-ab97-98cf6d5493dd" location="21 16"><up/><down/></link>
	<link id="e0cdddb5-fc46-4442-baa8-847f708e17af" location="23 13"><up/><left/><down/><right/></link>
	<link id="8dd5aaa4-7829-4630-bb0a-3b02347a7e2a" location="26 5"><up/><down/></link>
	<link id="1cfc2856-6b60-45ee-a9b1-e4b528d5756e" location="26 6"><up/><down/></link>
	<link id="82f0cab2-0d87-4b72-ab19-7dae7f0309be" location="20 18"><up/><down/><right/></link>
	<link id="5643f3f3-88ec-42f9-a976-99117db73a18" location="26 7"><up/><down/></link>
	<link id="bc271484-dbc6-4b22-b124-034db7976d17" location="27 0"><left/><down/><right/></link>
	<link id="3dec05ed-ee08-4243-b8f7-66f47d7fc2f1" location="21 17"><up/><down/></link>
	<link id="e2cad093-154c-4445-8930-e055dafa08b6" location="26 8"><up/><down/></link>
	<link id="cd4fd93d-2064-4d9a-981f-113b0041446c" location="26 9"><up/><down/></link>
	<link id="4b8fd43a-b195-4c32-98d1-2da21a846761" location="21 18"><up/><left/><down/></link>
	<link id="edd77330-c8ec-4b3d-8b28-7f1488648595" location="26 10"><up/><down/></link>
	<link id="b0862b96-2196-434d-87b1-ae6c22b0ed8b" location="28 0"><left/><down/><right/></link>
	<link id="e9f34020-b231-4974-a950-6bd88b96b822" location="27 8"><left/><down/><right/></link>
	<link id="001249b5-eb78-4e82-98cf-fd4112bd82e6" location="26 11"><up/><down/></link>
	<link id="52106be9-338f-432a-9250-03eb97ed8a16" location="26 12"><up/><down/></link>
	<link id="36ab2219-a6f9-42e5-b59f-3be87a2288e0" location="26 13"><up/><down/></link>
	<link id="9caced9b-9b69-427c-8745-2e73366cd058" location="28 8"><up/><left/><down/><right/></link>
	<link id="a550f5ab-6090-4384-a1d9-ffdcbc622c5c" location="26 14"><up/><left/><down/></link>
	<link id="024884e3-c763-4cec-a86b-4196c373f1d9" location="23 19"><up/><down/><right/></link>
	<link id="b3033557-8746-434d-84d7-5230bcba837d" location="26 15"><up/><down/></link>
	<link id="1fe960da-114b-4312-b871-812443f2b963" location="27 14"><left/><down/><right/></link>
	<link id="5969cd70-9392-4593-ace2-eb63409fafaa" location="26 16"><up/><down/></link>
	<link id="9d11c972-bcaa-4a81-b2db-a1d72e819fbf" location="24 19"><left/><right/></link>
	<link id="d3ddc79e-f302-4440-93b4-8a19a7bd52b7" location="26 17"><up/><left/><down/><right/></link>
	<link id="da07f8b0-ebed-43f0-9642-a00c26016802" location="28 14"><up/><left/><down/><right/></link>
	<link id="672332a4-ddd6-41cb-9770-53d0394ef5a8" location="25 19"><left/><right/></link>
	<link id="a21563af-d23d-468e-a0c0-73503abcc5a0" location="26 18"><up/><down/></link>
	<link id="41802d7f-f820-4594-be91-9942ff8ae429" location="26 19"><up/><left/><right/></link>

</sfc>
